{"ast":null,"code":"var _jsxFileName = \"E:\\\\Moringa\\\\product_app\\\\src\\\\components\\\\ProductControl.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\n//component imports\nimport AddProduct from './AddProduct';\nimport ProductList from '.';\nimport NewProductForm from './NewProductForm';\nimport ProductDetail from './ProductDetail';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass ProductControl extends Component {\n  constructor(props) {\n    super(props);\n    this.handleClick = () => {\n      if (this.state.selectedProduct != null) {\n        this.setState({\n          productFormVisible: false,\n          selectedProduct: null\n        });\n      } else {\n        this.setState(prevState => ({\n          productFormVisible: !prevState.productFormVisible\n        }));\n      }\n    };\n    this.handleAddingNewProduct = newProduct => {\n      axios.post('http://localhost:5000/products', newProduct).then(res => console.log(res.data)).catch(err => console.log(err));\n      this.setState({\n        productFormVisible: false\n      });\n    };\n    this.handleDeletingProduct = id => {\n      axios.delete('http://localhost:5000/api/products/' + id).then(res => console.log(res.data)).catch(error => {\n        console.log(error);\n      });\n      this.setState({\n        actualProductList: this.state.actualProductList.filter(product => product._id !== id),\n        formVisibleOnPage: false,\n        selectedProduct: null\n      });\n    };\n    this.handleChangingSelectedProduct = id => {\n      const selectedProduct = this.state.actualProductList.filter(product => product.id === id)[0];\n      this.setState({\n        selectedProduct: selectedProduct\n      });\n    };\n    this.state = {\n      productFormVisible: false,\n      actualProductList: [],\n      selectedProduct: null\n    };\n  }\n  componentDidMount() {\n    axios.get('http://localhost:5000/products').then(res => {\n      console.log(res);\n      this.setState({\n        actualProductList: res.data\n      });\n    });\n  }\n  render() {\n    let currentVisibleState = null;\n    let buttonText = null;\n    if (this.state.selectedProduct != null) {\n      currentVisibleState = /*#__PURE__*/_jsxDEV(ProductDetail, {\n        product: this.state.selectedProduct,\n        onDeleteProduct: this.handleDeletingProduct\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 35\n      }, this); //new code\n      buttonText = 'Back to Product List ';\n    } else if (this.state.productFormVisible) {\n      currentVisibleState = /*#__PURE__*/_jsxDEV(NewProductForm, {\n        onNewProductCreation: this.handleAddingNewProduct\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 35\n      }, this);\n      buttonText = 'Go back to Product List';\n    } else {\n      currentVisibleState = /*#__PURE__*/_jsxDEV(ProductList, {\n        productList: this.state.actualProductList,\n        onProductSelection: this.handleChangingSelectedProduct\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 35\n      }, this); // Because a user will actually be clicking on the Product in the Product component, we will need to pass our new handleChangingSelectedProduct method as a prop.\n      buttonText = 'Add A Product';\n    }\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(AddProduct, {\n        whenButtonClicked: this.handleClick,\n        buttonText: buttonText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), currentVisibleState]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default ProductControl;","map":{"version":3,"names":["React","Component","axios","AddProduct","ProductList","NewProductForm","ProductDetail","ProductControl","constructor","props","handleClick","state","selectedProduct","setState","productFormVisible","prevState","handleAddingNewProduct","newProduct","post","then","res","console","log","data","catch","err","handleDeletingProduct","id","delete","error","actualProductList","filter","product","_id","formVisibleOnPage","handleChangingSelectedProduct","componentDidMount","get","render","currentVisibleState","buttonText"],"sources":["E:/Moringa/product_app/src/components/ProductControl.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\n//component imports\r\nimport AddProduct from './AddProduct';\r\nimport ProductList from '.';\r\nimport NewProductForm from './NewProductForm';\r\nimport ProductDetail from './ProductDetail';\r\n\r\n\r\n\r\n\r\nclass ProductControl extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state ={\r\n            productFormVisible: false,\r\n            actualProductList: [], \r\n            selectedProduct: null\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        axios.get('http://localhost:5000/products')\r\n        .then(res =>{\r\n            console.log(res)\r\n            this.setState({\r\n                actualProductList: res.data\r\n            })\r\n        })\r\n    }\r\n\r\n    handleClick = ()=>{\r\n        if(this.state.selectedProduct !=null){\r\n            this.setState({\r\n                productFormVisible: false,\r\n                selectedProduct: null\r\n            })\r\n        }else{\r\n\r\n            this.setState((prevState)=>({\r\n                productFormVisible: !prevState.productFormVisible\r\n            }))\r\n        }\r\n    }\r\n\r\n\r\n    // Method to handle adding a new product\r\n    handleAddingNewProduct = (newProduct) =>{   \r\n        axios.post('http://localhost:5000/products', newProduct)\r\n            .then(res => console.log(res.data))\r\n            .catch(err => console.log(err))\r\n        this.setState({\r\n            productFormVisible: false\r\n        })\r\n    };\r\n    handleDeletingProduct = (id) =>{\r\n        axios.delete('http://localhost:5000/api/products/'+id)\r\n            .then(res => console.log(res.data))\r\n            .catch((error) =>{\r\n                console.log(error)\r\n            })\r\n            this.setState({\r\n                actualProductList: this.state.actualProductList.filter(product => product._id !== id),\r\n                formVisibleOnPage: false,\r\n                selectedProduct: null\r\n            })\r\n    }\r\n\r\n     // Method to handle click event on a product\r\n     handleChangingSelectedProduct = (id) => {\r\n        const selectedProduct = this.state.actualProductList.filter(product => product.id === id)[0];\r\n        this.setState({selectedProduct: selectedProduct});\r\n    }\r\n    render() {\r\n        let currentVisibleState = null;\r\n        let buttonText = null\r\n        if(this.state.selectedProduct != null){\r\n            currentVisibleState = <ProductDetail  product ={this.state.selectedProduct} onDeleteProduct = {this.handleDeletingProduct}/> //new code\r\n            buttonText = 'Back to Product List '\r\n        } else if (this.state.productFormVisible){\r\n            currentVisibleState = <NewProductForm  onNewProductCreation= {this.handleAddingNewProduct}/>\r\n            buttonText = 'Go back to Product List' \r\n        }else{\r\n            currentVisibleState = <ProductList productList = {this.state.actualProductList} onProductSelection = {this.handleChangingSelectedProduct} /> // Because a user will actually be clicking on the Product in the Product component, we will need to pass our new handleChangingSelectedProduct method as a prop.\r\n            buttonText = 'Add A Product'\r\n        }\r\n        return (\r\n            <React.Fragment>\r\n\r\n                <AddProduct \r\n                whenButtonClicked = {this.handleClick}\r\n                buttonText = {buttonText} />\r\n                \r\n                {currentVisibleState}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ProductControl;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}